<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <title>GPS API</title>
    <script type="text/javascript" src="lib/Jquery/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="lib/js/ccn.gps.js"></script>
</head>
<body>
<div id="info"></div>
<button id="btn_refesh">获取设备信息</button>
<button id="btn_geo">获取经纬度</button>
<button id="btn_ip">获取IP</button>
<button id="btn_google_gps">Google Get location</button>
<script>
    $(function () {
        var updateHtml = function (param) {
            $('#info').html(JSON.stringify(param));
        }

        var ccn = new CCN();
        $('#btn_refesh').click(function () {
            var info = {
                ua: window.navigator.userAgent,
                os: ccn.getOS(),
                browser: ccn.getBrowser()
            };
            updateHtml(info);
        });

        $('#btn_geo').click(function () {
            updateHtml('');
            ccn.getGeo(function (position) {
                updateHtml(position);
            }, function (error) {
                updateHtml(error);
            });
        });

        $('#btn_ip').click(function () {
            ccn.getIp(function (ip) {
                updateHtml(ip);
            }, function (err) {
                updateHtml(err);
            });
        });


        var din = {
            "homeMobileCountryCode": 310,
            "homeMobileNetworkCode": 410,
            "radioType": "gsm",
            "carrier": "Vodafone",
            "considerIp": "true",
            "cellTowers": [],
            "wifiAccessPoints": []
        };
        $("#btn_google_gps").click(function () {
            $.ajax({
                type: "POST",
                url: "https://www.googleapis.com/geolocation/v1/geolocate?key=AIzaSyC-GcsTZyRvzdtSZ2usAQVxoaXkEMdcP0s",
                data: din,
                success: function (data) {
                    console.log(data);
                }
            });
        });
    });
</script>

</body>
</html>